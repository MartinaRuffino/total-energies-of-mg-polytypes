echo --- slatsm-to-generic: ccomp to generic ---

rm -f xx.f
foreach i ( `egrep -l '^C#ifdef |^C#elseif |^C#ifndefC|^C#define' *.f` )
  rm -f xx.f ; mv $i xx.f
  ccomp -uAIX -uAIX-xlf90 -uAPOLLO -uBLAS -uBLAS3 -uCRAY -uDDOT -uDEC -uHP -uLINUX -uSGI -uSGI-BUG -uSGI-PARALLEL -uPARALLEL xx.f $i
end

rm -f xx.f ; ccomp -uFORMATTED_READ a2bin.f xx.f
ccomp -dFORMATTED_READ -uAPOLLO_BUG xx.f a2bin.f

rm -f xx.f ; mv cpudel.f xx.f
ccomp -uAIX -uAPOLLO -uCONVEX -uCRAY -uDEC -uHP -uLINUX -uSGI -uSUN xx.f cpudel.f

foreach i (dqinv.f yqinv.f)
  rm -f xx.f ; ccomp -uRECUR $i xx.f
  ccomp -dRECUR xx.f $i
end

foreach i (?1mach.f)
  rm -f xx.f ; ccomp -uIEEE -uRIEEE -uCRAY -uC90 $i xx.f
  ccomp -dIEEE xx.f $i
end

rm -f xx.f ; ccomp -uPOINTER symvec.f xx.f
ccomp -dPOINTER xx.f symvec.f

rm -f main.f fessl.f

if (-e fmain.f) mv -f fmain.f fmain.fortran
rm -f xx.f
