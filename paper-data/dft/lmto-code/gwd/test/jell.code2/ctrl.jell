# Variables entering into expressions parsed by input
% const nit=10
% const met=5
% const so=0 nsp=so?2:1
% const lxcf=2 lxcf1=0 lxcf2=0     # for PBE use: lxcf=0 lxcf1=101 lxcf2=130
% const pwmode=0 pwemax=3          # Use pwmode=1 or 11 to add APWs
% const sig=12 gwemax=2.15 gcutb=2.9 gcutx=2.3  # GW-specific
% const nkabc=10 nkgw=8 gmax=5 beta=.3
% const jell=t zbak=-1

VERS  LM:7 FP:7 # ASA:7
IO    SHOW=f HELP=f IACTIV=f VERBOS=35,35  OUTPUT=*
EXPRESS
# Basis set
  gmax=   {gmax}                   # PW cutoff for charge density
  autobas[pnu=1 loc=1 mto=4 lmto=5 gw=1 pfloat=2,1]

# Self-consistency
  nit=    {nit}                    # Maximum number of iterations
  mix=    B2,b={beta},k=7          # Charge density mixing parameters
  conv=   1e-5                     # Convergence tolerance (energy)
  convc=  1e-5                     # tolerance in RMS (output-input) density

# Brillouin zone
  nkabc=  {nkabc}                  # 1 to 3 values
  metal=  {met}                    # Management of k-point integration weights in metals

# Potential
  nspin=  {nsp}                    # 2 for spin polarized calculations
  so=     {so}                     # 1 turns on spin-orbit coupling
  xcfun=  {lxcf},{lxcf1},{lxcf2}   # set lxcf=0 for libxc functionals

#SYMGRP i*r3(1,1,-1) r4x
HAM
      PWMODE={pwmode} PWEMIN=0 PWEMAX={pwemax} OVEPS=0 # For APW addition to basis
      FORCES={so==0} ELIND=-0.7 # REL=0
      RDSIG={sig} SIGP[EMAX={gwemax}]  # Add self-energy to LDA
GW    NKABC={nkgw} GCUTB={gcutb} GCUTX={gcutx} DELRE=.01 .1 
      GSMEAR=0.003 PBTOL=3e-4,3e-4,1e-3

STRUC 
      NL=5  NBAS=1  NSPEC=1
      ALAT=7.964  PLAT= -.5  .5  .5   .5 -.5  .5   .5  .5 -.5
SITE 
      ATOM=X POS=  0.0000000   0.0000000   0.0000000
% const optmod=0
OPTICS  MODE={optmod} NPTS=1001 WINDOW=0,2
        FILBND=1,58 EMPBND=1,58 ALLTRANS=T

BZ
% ifdef jell
     ZBAK={zbak}
% endif

SPEC 
% ifdef jell
  ATOM=X       Z= 0   R= 2.624229  LMX=3 LMXA=4
% else
  ATOM=X       Z= 13  R= 2.624229  LMX=3 LMXA=4
% endif